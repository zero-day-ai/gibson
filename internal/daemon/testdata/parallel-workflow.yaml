name: Parallel Execution Test Workflow
description: Tests parallel node execution and event ordering
version: "1.0"

config:
  llm:
    default_provider: mock
    default_model: mock-model

target:
  seeds:
    - value: "parallel-test.example.com"
      type: hostname
      scope: in_scope

nodes:
  # Phase 1: Initial node
  - id: init
    type: agent
    name: Initialize
    description: Setup for parallel execution
    agent: test-agent
    timeout: 30s
    retry:
      max_retries: 0
      backoff: constant
      initial_delay: 1s
    task:
      goal: "Initialize test"

  # Phase 2: Parallel execution
  - id: parallel_group
    type: parallel
    name: Parallel Execution Group
    description: Execute multiple nodes concurrently
    depends_on:
      - init
    sub_nodes:
      - id: parallel_1
        type: agent
        name: Parallel Agent 1
        agent: test-agent
        timeout: 1m
        task:
          goal: "Parallel task 1"

      - id: parallel_2
        type: agent
        name: Parallel Agent 2
        agent: test-agent
        timeout: 1m
        task:
          goal: "Parallel task 2"

      - id: parallel_3
        type: tool
        name: Parallel Tool
        tool: test-tool
        timeout: 30s
        input:
          operation: "parallel_test"

  # Phase 3: Join and finalize
  - id: join_parallel
    type: join
    name: Join Parallel Results
    description: Wait for parallel execution to complete
    depends_on:
      - parallel_group

  - id: finalize
    type: agent
    name: Finalize
    description: Final processing after parallel execution
    agent: test-agent
    depends_on:
      - join_parallel
    timeout: 30s
    task:
      goal: "Finalize test"
